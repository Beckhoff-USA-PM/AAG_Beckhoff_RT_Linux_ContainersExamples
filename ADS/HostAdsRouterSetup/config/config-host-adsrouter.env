# Environment variables for connecting to host ADS server via AdsRouterConsole
# This configuration sets up containers to communicate with a TwinCAT system
# running on the Docker host machine using plain ADS routing

# Network Configuration
# IMPORTANT: Edit these if you need to change IP addresses
DOCKER_SUBNET=192.168.21.0/24
DOCKER_GATEWAY=192.168.21.1
ROUTER_IP=192.168.21.2
ADS_CLIENT_IP=192.168.21.4
PWSH_CLIENT_IP=192.168.21.5

# Host AMS NetID for PwshClient to connect to
# This is automatically retrieved by the Makefile using: tcadstool 127.0.0.1 netid
# Simply run: make up
#HOST_AMS_NETID=

# Forces the ADS protocol (not MQTT)
AmsRouter__ChannelProtocol=Ads

# Basic ADS-Router config
AmsRouter__Name=AdsRouterConsole
AmsRouter__NetId=43.43.43.43.1.1

# IP and TCP socket on which the ADS-Router should listen on for incoming (internal) client connections
# Changed IP/Port here to use a dedicated Ip Port for internal Router communication
AmsRouter__LoopbackIP=${ROUTER_IP}
AmsRouter__LoopbackPort=48900

# Setting to accept incoming ADS-Client connections from the private container subnetwork
AmsRouter__LoopbackExternalSubnet=${DOCKER_SUBNET}

# Remote Connections to TwinCAT Hosts
# IMPORTANT: Configure the connection to the Docker host TwinCAT system
# The router needs to know how to reach the host from within the container network

# Docker Host TwinCAT System
# The address must be reachable from inside the container (use Docker gateway IP)
# The NetID should match the host's actual AMS NetID (retrieved by tcadstool)
AmsRouter__RemoteConnections__0__Name=DockerHostTwinCAT
AmsRouter__RemoteConnections__0__Address=${DOCKER_GATEWAY}
AmsRouter__RemoteConnections__0__NetId=${HOST_AMS_NETID}

# Additional TwinCAT Hosts (if needed)
# Uncomment and configure if you need to connect to other TwinCAT systems
#AmsRouter__RemoteConnections__1__Name=TwinCAT-Host-2
#AmsRouter__RemoteConnections__1__Address=192.168.178.74
#AmsRouter__RemoteConnections__1__NetId=192.168.178.74.1.1

# Log output (Warning level)
Logging__LogLevel__Default=Warning
